<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Calculadora profesional para cotizaciÃ³n de tesis con empastado y opciones personalizadas" />
  <meta name="keywords" content="calculadora tesis, empastado, cotizaciÃ³n, impresiÃ³n" />
  <meta name="author" content="ServiGaco" />
  
  <title>Calculadora de Tesis - CotizaciÃ³n Profesional</title>

  <!-- FUENTES: Montserrat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- ESTILOS -->
  <link rel="stylesheet" href="style.css" />

  <!-- TAILWIND CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    }
  </script>

  <!-- FAVICON -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icono.png" />
  <link rel="shortcut icon" href="assets/icono.png" />

  <!-- HTML2PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" defer></script>
</head>

<body>
  <main class="container">
    
    <!-- ========================================
         ğŸ§­ NAVEGACIÃ“N PRINCIPAL
         ======================================== -->
    <servigaco-nav></servigaco-nav>

    <!-- ========================================
         ğŸ“ SECCIÃ“N: CALCULADORA DE TESIS
         ======================================== -->
    <section class="form-card" aria-label="Formulario de cotizaciÃ³n">
      <!-- Logo -->
      <figure class="logo-container">
        <img src="logo.png" alt="Logo de la empresa" class="logo-form" width="150" height="80" />
      </figure>

      <!-- TÃ­tulo principal -->
      <header class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
        <h1>Calculadora de Tesis</h1>
        <button type="button" id="btnVerGuardadas" class="py-2 px-5 rounded-xl font-bold text-white bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-400 hover:to-teal-600 shadow-md transform transition-all duration-200 hover:-translate-y-1 flex items-center gap-2 text-sm">
          <span class="text-lg">ğŸ“‚</span>
          Ver Guardadas
        </button>
      </header>

      <!-- Formulario de cotizaciÃ³n -->
      <form id="formCotizacion" aria-label="Formulario de cÃ¡lculo">
        
        <!-- TamaÃ±o de papel -->
        <div class="form-group">
          <label for="tamano">
            <span class="label-icon">ğŸ“</span>
            TamaÃ±o de papel
          </label>
          <select id="tamano" name="tamano" required aria-describedby="alertaTabloide">
            <option value="carta">Carta (8.5 x 11)</option>
            <option value="tabloide">11 x 17</option>
          </select>
        </div>

        <!-- Alerta tamaÃ±o tabloide -->
        <div id="alertaTabloide" class="alerta" role="alert" aria-live="polite">
          <span class="alert-icon">âš ï¸</span>
          11Ã—17 solo disponible en papel satinado con empastado vinil.
        </div>

        <!-- Tipo de papel -->
        <div class="form-group">
          <label for="papel">
            <span class="label-icon">ğŸ“„</span>
            Tipo de papel
          </label>
          <select id="papel" name="papel" required>
            <option value="bond">Bond</option>
            <option value="hilo">Hilo</option>
            <option value="satinado">Satinado</option>
          </select>
        </div>

        <!-- PÃ¡ginas B/N y Color -->
        <div id="bnColorSection" class="form-section">
          <div class="form-group">
            <label for="bn">
              <span class="label-icon">âš«</span>
              PÃ¡ginas Blanco y Negro
            </label>
            <input 
              type="number" 
              id="bn" 
              name="bn"
              min="0" 
              value="0"
              placeholder="Ej: 50"
              aria-label="Cantidad de pÃ¡ginas en blanco y negro"
            />
          </div>

          <div class="form-group">
            <label for="color">
              <span class="label-icon">ğŸ¨</span>
              PÃ¡ginas a Color
            </label>
            <input 
              type="number" 
              id="color" 
              name="color"
              min="0" 
              value="0"
              placeholder="Ej: 10"
              aria-label="Cantidad de pÃ¡ginas a color"
            />
          </div>
        </div>

        <!-- Total de pÃ¡ginas (satinado) -->
        <div id="soloPaginas" class="form-section">
          <div class="form-group">
            <label for="paginas">
              <span class="label-icon">ğŸ“Š</span>
              Total de pÃ¡ginas
            </label>
            <input 
              type="number" 
              id="paginas" 
              name="paginas"
              min="1" 
              value="1"
              placeholder="Ej: 100"
              aria-label="Total de pÃ¡ginas"
            />
          </div>
        </div>

        <!-- Cantidad de tomos -->
        <div class="form-group">
          <label for="tomos">
            <span class="label-icon">ğŸ“š</span>
            Cantidad de tomos
          </label>
          <input 
            type="number" 
            id="tomos" 
            name="tomos"
            value="1" 
            min="1" 
            max="10"
            required
            aria-label="NÃºmero de tomos a empastar"
          />
        </div>

        <!-- Tipo de empastado -->
        <div class="form-group">
          <label for="tipoEmpastado">
            <span class="label-icon">ğŸ“•</span>
            Tipo de empastado
          </label>
          <select id="tipoEmpastado" name="tipoEmpastado" required>
            <option value="tapa_dura">Tapa dura</option>
            <option value="vinil">Vinil</option>
          </select>
        </div>

        <!-- Color de tapa (solo tapa dura) -->
        <div id="colorTapaSection" class="form-section">
          <div class="form-group">
            <label for="colorTapa">
              <span class="label-icon">ğŸ¨</span>
              Color de tapa
            </label>
            <select id="colorTapa" name="colorTapa">
              <option value="beige">Beige</option>
              <option value="morado">Morado</option>
              <option value="azul_marino">Azul marino</option>
              <option value="azul_cielo">Azul cielo</option>
              <option value="rojo">Rojo</option>
              <option value="verde_botella">Verde botella</option>
              <option value="amarillo_medicina">Amarillo medicina</option>
              <option value="blanco">Blanco</option>
            </select>
          </div>
        </div>

        <!-- Â¿Lleva lomo? -->
        <div class="form-group">
          <label for="lomo">
            <span class="label-icon">ğŸ“</span>
            Â¿Lleva lomo?
          </label>
          <select id="lomo" name="lomo">
            <option value="no">No</option>
            <option value="si">SÃ­</option>
          </select>
        </div>

        <!-- Â¿Lleva CD? -->
        <div class="form-group">
          <label for="llevaCd">
            <span class="label-icon">ğŸ’¿</span>
            Â¿Lleva CD?
          </label>
          <select id="llevaCd" name="llevaCd">
            <option value="no">No</option>
            <option value="si">SÃ­</option>
          </select>
        </div>

        <!-- Cantidad de CD -->
        <div id="cdSection" class="form-section">
          <div class="form-group">
            <label for="cantidadCd">
              <span class="label-icon">ğŸ’¿</span>
              Cantidad de CD
            </label>
            <input 
              type="number" 
              id="cantidadCd" 
              name="cantidadCd"
              min="1" 
              max="10"
              value="1"
              aria-label="NÃºmero de CDs a incluir"
            />
          </div>
        </div>

        <!-- Grupo de botones -->
        <div class="button-group">
          <button type="button" id="btnCalcular" class="w-full py-3 px-6 rounded-xl font-bold text-white bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 hover:from-blue-500 hover:to-blue-700 shadow-lg shadow-blue-500/40 transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ§®</span>
            Calcular Total
          </button>

          <button type="button" id="btnGuardarTesis" class="w-full py-3 px-6 rounded-xl font-bold text-white bg-gradient-to-r from-indigo-500 via-indigo-600 to-indigo-700 hover:from-indigo-400 hover:to-indigo-600 shadow-lg shadow-indigo-500/40 transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ’¾</span>
            Guardar en Nube
          </button>

          <button type="button" id="btnGenerar" class="w-full py-3 px-6 rounded-xl font-bold text-white bg-gradient-to-r from-emerald-600 via-emerald-700 to-emerald-800 hover:from-emerald-500 hover:to-emerald-700 shadow-lg shadow-emerald-500/40 transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ–¨ï¸</span>
            Imprimir
          </button>

          <button type="button" id="btnDescargarPdf" class="w-full py-3 px-6 rounded-xl font-bold text-white bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700 hover:from-orange-400 hover:to-orange-600 shadow-lg shadow-orange-500/40 transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ“„</span>
            Descargar PDF
          </button>

          <button type="button" id="btnCompartir" class="w-full py-3 px-6 rounded-xl font-bold text-white bg-gradient-to-r from-purple-600 via-purple-700 to-purple-800 hover:from-purple-500 hover:to-purple-700 shadow-lg shadow-purple-500/40 transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ“¤</span>
            Compartir PDF
          </button>

          <button type="button" id="btnReiniciar" class="w-full py-3 px-6 rounded-xl font-bold text-gray-700 bg-white border-2 border-gray-200 hover:bg-red-50 hover:text-red-600 hover:border-red-200 shadow-md transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2">
            <span class="text-xl">ğŸ”„</span>
            Reiniciar
          </button>
        </div>

        <!-- Resultado del cÃ¡lculo -->
        <div class="resultado" id="resultado" role="status" aria-live="polite"></div>

      </form>

      <!-- ========================================
           ğŸ’³ SECCIÃ“N: COTIZACIÃ“N GENERADA
           ======================================== -->
      <section id="cotizacionGenerada" class="cotizacion" style="display: none;"></section>

      <!-- ========================================
           ğŸ“‹ SECCIÃ“N: TABLA DE PRECIOS
           ======================================== -->
      <div class="tabla-container">
        <button 
          type="button" 
          id="btnMostrarTabla" 
          class="w-full py-3 px-6 rounded-xl font-bold text-gray-700 bg-white border-2 border-gray-200 hover:bg-gray-50 hover:border-blue-300 shadow-md transform transition-all duration-200 hover:-translate-y-1 flex items-center justify-center gap-2"
          aria-expanded="false"
          aria-controls="tablaPrecios"
        >
          <span class="text-xl">ğŸ“‹</span>
          Ver precios y detalles
        </button>

        <section 
          class="tabla-precios" 
          id="tablaPrecios" 
          aria-label="Tabla de precios y servicios"
        >
          <header class="tabla-header">
            <h3>
              <span class="tabla-icon">ğŸ“‹</span>
              Precios y Detalles
            </h3>
            <p class="tabla-subtitle">Todos los precios estÃ¡n en pesos dominicanos (RD$)</p>
          </header>

          <div class="tabla-responsive">
            <table>
              <caption class="sr-only">Lista completa de precios por servicio</caption>
              <thead>
                <tr>
                  <th scope="col">Concepto</th>
                  <th scope="col">Detalle</th>
                  <th scope="col">Precio (RD$)</th>
                </tr>
              </thead>
              <tbody>
                <!-- Papel Bond -->
                <tr>
                  <td data-label="Concepto">Bond</td>
                  <td data-label="Detalle">B/N</td>
                  <td data-label="Precio">$6 / pÃ¡g.</td>
                </tr>
                <tr>
                  <td data-label="Concepto">Bond</td>
                  <td data-label="Detalle">Color</td>
                  <td data-label="Precio">$12 / pÃ¡g.</td>
                </tr>

                <!-- Papel Hilo -->
                <tr>
                  <td data-label="Concepto">Hilo</td>
                  <td data-label="Detalle">B/N</td>
                  <td data-label="Precio">$8 / pÃ¡g.</td>
                </tr>
                <tr>
                  <td data-label="Concepto">Hilo</td>
                  <td data-label="Detalle">Color</td>
                  <td data-label="Precio">$15 / pÃ¡g.</td>
                </tr>

                <!-- Papel Satinado -->
                <tr>
                  <td data-label="Concepto">Satinado (Carta)</td>
                  <td data-label="Detalle">B/N o Color</td>
                  <td data-label="Precio">$25 / pÃ¡g.</td>
                </tr>
                <tr>
                  <td data-label="Concepto">Satinado (11Ã—17)</td>
                  <td data-label="Detalle">B/N o Color</td>
                  <td data-label="Precio">$45 / pÃ¡g.</td>
                </tr>

                <!-- Empastado Tapa Dura -->
                <tr>
                  <td data-label="Concepto">Empastado Tapa Dura</td>
                  <td data-label="Detalle">Carta</td>
                  <td data-label="Precio">$500â€“600</td>
                </tr>

                <!-- Empastado Vinil -->
                <tr>
                  <td data-label="Concepto">Empastado Vinil</td>
                  <td data-label="Detalle">Carta</td>
                  <td data-label="Precio">$1,200</td>
                </tr>
                <tr>
                  <td data-label="Concepto">Empastado Vinil</td>
                  <td data-label="Detalle">11Ã—17</td>
                  <td data-label="Precio">$1,500</td>
                </tr>

                <!-- Extras -->
                <tr>
                  <td data-label="Concepto">Lomo</td>
                  <td data-label="Detalle">Por tomo</td>
                  <td data-label="Precio">$50</td>
                </tr>
                <tr>
                  <td data-label="Concepto">CD rotulado</td>
                  <td data-label="Detalle">Por unidad</td>
                  <td data-label="Precio">$200</td>
                </tr>
              </tbody>
            </table>
          </div>

          <footer class="tabla-footer">
            <p>
              <span class="info-icon">â„¹ï¸</span>
              Los precios pueden variar segÃºn especificaciones especiales. 
              ContÃ¡ctanos para mÃ¡s informaciÃ³n.
            </p>
          </footer>
        </section>
      </div>
    </section>

    <servigaco-footer></servigaco-footer>

  </main>

  <!-- ========================================
       ğŸ“‚ MODAL PARA COTIZACIONES GUARDADAS
       ======================================== -->
  <div id="modalCotizacionesGuardadas" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden animate-fade-in">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-slide-in-up m-4">
      <!-- Header del Modal -->
      <div class="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center flex-shrink-0">
        <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
          <span class="text-3xl">ğŸ“‚</span>
          Tesis Guardadas
        </h3>
        <button id="btnCerrarModal" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-800 dark:hover:text-gray-200 transition-all" aria-label="Cerrar modal">
          <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>
      <!-- Contenido del Modal (lista) -->
      <div class="p-2 md:p-6 overflow-y-auto" id="listaCotizacionesGuardadas">
        <!-- La lista de cotizaciones se generarÃ¡ aquÃ­ con JavaScript -->
      </div>
    </div>
  </div>

  <style>
    @keyframes animate-fade-in { from { opacity: 0; } to { opacity: 1; } }
    @keyframes animate-slide-in-up { from { transform: translateY(20px); opacity: 0.8; } to { transform: translateY(0); opacity: 1; } }
    .animate-fade-in { animation: animate-fade-in 0.3s ease-out forwards; }
    .animate-slide-in-up { animation: animate-slide-in-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
  </style>

  <!-- SCRIPTS -->
  <!-- ğŸ”¥ FIREBASE SDK (Base de Datos) -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>

  <script src="components.js"></script>
  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>